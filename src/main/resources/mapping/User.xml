<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kuncms.user.dao.UserDao" >


	
 	<update id="addUserGoldCoin"  parameterType="com.kuncms.user.model.User">
		update user_info  set gold_coin=#{gold_coin} where user_name=#{user_name}
 	</update>


 	<select id="isRegister"  parameterType="com.kuncms.user.model.User"  resultType="com.kuncms.user.model.User">
        SELECT*FROM user_info u where flag='1'
         <if test="openid != null and openid !=''">
        		and u.openid=#{openid} 
      	</if>
     </select>


 	<update id="update"  parameterType="com.kuncms.user.model.User">
		update user_info  set gold_coin=#{gold_coin} where user_name=#{user_name}
 	</update>

 	<select id="check_username"  parameterType="com.kuncms.user.model.User"  resultType="com.kuncms.user.model.User">
        SELECT*FROM user_info u where flag='1'
         <if test="user_name != null and user_name !=''">
        		and u.user_name=#{user_name} 
      	</if>
     </select>


    <select id="queryCoverPhoto"  parameterType="com.kuncms.user.model.User"  resultType="com.kuncms.user.model.User">
        SELECT*FROM coverphoto;
     </select>
     
     <select id="login_operate"  parameterType="com.kuncms.user.model.User"  resultType="com.kuncms.user.model.User">
        SELECT*FROM user_info u where flag='1'
         <if test="user_name != null and user_name !='' and password != null and password !=''" >
        		and u.user_name=#{user_name} and u.password=#{password}
      	</if>
     </select>
    
    
    <insert id="newsignup"  parameterType="com.kuncms.user.model.User">
		insert into user_info(id,user_name,password,create_time,update_time,flag,gold_coin,user_status,user_class,empirical_value,openid,is_wechat) 
		   values(#{id},#{user_name},#{password},#{create_time},#{update_time},#{flag},#{gold_coin},#{user_status},#{user_class},#{empirical_value},#{openid},#{is_wechat})
 	</insert>
  

</mapper>