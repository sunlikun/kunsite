<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kuncms.downloadrecord.dao.DownloadRecordDao" >
  <resultMap id="BaseResultMap" type="com.kuncms.downloadrecord.model.DownloadRecord" >
  	<id column="id" property="id" jdbcType="VARCHAR" />
    <result column="video_id" property="videoId" jdbcType="VARCHAR" />
    <result column="download_time" property="downloadTime" jdbcType="TIMESTAMP" />
  </resultMap>
  
   <select id="queryRecordMonth"    resultType="com.kuncms.downloadrecord.model.DownloadRecord">
	        select*from download_record  d where DATE_SUB(CURDATE(), INTERVAL 30 DAY) &lt;= date(d.download_time) group by d.video_id  ORDER BY d.download_time  limit 0,6;
					
  </select>
  
   <select id="queryRecordIWeek"    resultType="com.kuncms.downloadrecord.model.DownloadRecord">
	        select*from download_record  d where DATE_SUB(CURDATE(), INTERVAL 7 DAY) &lt;= date(d.download_time)  group by d.video_id  ORDER BY d.download_time  limit 0,6;
					
  </select>
  
  
  
  
  <select id="queryRecordDayBy"    resultType="com.kuncms.downloadrecord.model.DownloadRecord">
	        select*from download_record  d where to_days(d.download_time) &lt;= to_days(now()) and to_days(d.download_time) &gt;= to_days(now()) group by d.video_id  ORDER BY d.download_time  limit 0,6;
					
  </select>

  <insert id="insert" parameterType="com.kuncms.downloadrecord.model.DownloadRecord" >
   
    insert into download_record (id, video_id, download_time
      )
    values (#{id,jdbcType=VARCHAR}, #{video_id,jdbcType=VARCHAR}, #{download_time}
      )
  </insert>
 
 
 
  
 
  
 
</mapper>